<!DOCTYPE HTML>
<html><head>
<link href="style.css" rel="stylesheet" type="text/css"/>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<link href="index.html" rel="Start"/>
<link href="Scanf.html" rel="previous"/>
<link href="Seq.html" rel="next"/>
<link href="index.html" rel="Up"/>
<link href="index_types.html" title="Index of types" rel="Appendix"/>
<link href="index_extensions.html" title="Index of extensions" rel="Appendix"/>
<link href="index_exceptions.html" title="Index of exceptions" rel="Appendix"/>
<link href="index_values.html" title="Index of values" rel="Appendix"/>
<link href="index_modules.html" title="Index of modules" rel="Appendix"/>
<link href="index_module_types.html" title="Index of module types" rel="Appendix"/>
<link href="Arg.html" title="Arg" rel="Chapter"/>
<link href="Array.html" title="Array" rel="Chapter"/>
<link href="ArrayLabels.html" title="ArrayLabels" rel="Chapter"/>
<link href="Atomic.html" title="Atomic" rel="Chapter"/>
<link href="Bigarray.html" title="Bigarray" rel="Chapter"/>
<link href="Bool.html" title="Bool" rel="Chapter"/>
<link href="Buffer.html" title="Buffer" rel="Chapter"/>
<link href="Bytes.html" title="Bytes" rel="Chapter"/>
<link href="BytesLabels.html" title="BytesLabels" rel="Chapter"/>
<link href="Callback.html" title="Callback" rel="Chapter"/>
<link href="CamlinternalAtomic.html" title="CamlinternalAtomic" rel="Chapter"/>
<link href="CamlinternalFormat.html" title="CamlinternalFormat" rel="Chapter"/>
<link href="CamlinternalFormatBasics.html" title="CamlinternalFormatBasics" rel="Chapter"/>
<link href="CamlinternalLazy.html" title="CamlinternalLazy" rel="Chapter"/>
<link href="CamlinternalMod.html" title="CamlinternalMod" rel="Chapter"/>
<link href="CamlinternalOO.html" title="CamlinternalOO" rel="Chapter"/>
<link href="Char.html" title="Char" rel="Chapter"/>
<link href="Complex.html" title="Complex" rel="Chapter"/>
<link href="Condition.html" title="Condition" rel="Chapter"/>
<link href="Digest.html" title="Digest" rel="Chapter"/>
<link href="Dynlink.html" title="Dynlink" rel="Chapter"/>
<link href="Either.html" title="Either" rel="Chapter"/>
<link href="Ephemeron.html" title="Ephemeron" rel="Chapter"/>
<link href="Event.html" title="Event" rel="Chapter"/>
<link href="Filename.html" title="Filename" rel="Chapter"/>
<link href="Float.html" title="Float" rel="Chapter"/>
<link href="Format.html" title="Format" rel="Chapter"/>
<link href="Fun.html" title="Fun" rel="Chapter"/>
<link href="Gc.html" title="Gc" rel="Chapter"/>
<link href="Genlex.html" title="Genlex" rel="Chapter"/>
<link href="Hashtbl.html" title="Hashtbl" rel="Chapter"/>
<link href="Int.html" title="Int" rel="Chapter"/>
<link href="Int32.html" title="Int32" rel="Chapter"/>
<link href="Int64.html" title="Int64" rel="Chapter"/>
<link href="Lazy.html" title="Lazy" rel="Chapter"/>
<link href="Lexing.html" title="Lexing" rel="Chapter"/>
<link href="List.html" title="List" rel="Chapter"/>
<link href="ListLabels.html" title="ListLabels" rel="Chapter"/>
<link href="Map.html" title="Map" rel="Chapter"/>
<link href="Marshal.html" title="Marshal" rel="Chapter"/>
<link href="MoreLabels.html" title="MoreLabels" rel="Chapter"/>
<link href="Mutex.html" title="Mutex" rel="Chapter"/>
<link href="Nativeint.html" title="Nativeint" rel="Chapter"/>
<link href="Obj.html" title="Obj" rel="Chapter"/>
<link href="Ocaml_operators.html" title="Ocaml_operators" rel="Chapter"/>
<link href="Oo.html" title="Oo" rel="Chapter"/>
<link href="Option.html" title="Option" rel="Chapter"/>
<link href="Parsing.html" title="Parsing" rel="Chapter"/>
<link href="Printexc.html" title="Printexc" rel="Chapter"/>
<link href="Printf.html" title="Printf" rel="Chapter"/>
<link href="Queue.html" title="Queue" rel="Chapter"/>
<link href="Random.html" title="Random" rel="Chapter"/>
<link href="Result.html" title="Result" rel="Chapter"/>
<link href="Scanf.html" title="Scanf" rel="Chapter"/>
<link href="Semaphore.html" title="Semaphore" rel="Chapter"/>
<link href="Seq.html" title="Seq" rel="Chapter"/>
<link href="Set.html" title="Set" rel="Chapter"/>
<link href="Stack.html" title="Stack" rel="Chapter"/>
<link href="StdLabels.html" title="StdLabels" rel="Chapter"/>
<link href="Stdlib.html" title="Stdlib" rel="Chapter"/>
<link href="Str.html" title="Str" rel="Chapter"/>
<link href="Stream.html" title="Stream" rel="Chapter"/>
<link href="String.html" title="String" rel="Chapter"/>
<link href="StringLabels.html" title="StringLabels" rel="Chapter"/>
<link href="Sys.html" title="Sys" rel="Chapter"/>
<link href="Thread.html" title="Thread" rel="Chapter"/>
<link href="ThreadUnix.html" title="ThreadUnix" rel="Chapter"/>
<link href="Uchar.html" title="Uchar" rel="Chapter"/>
<link href="Unit.html" title="Unit" rel="Chapter"/>
<link href="Unix.html" title="Unix" rel="Chapter"/>
<link href="UnixLabels.html" title="UnixLabels" rel="Chapter"/>
<link href="Weak.html" title="Weak" rel="Chapter"/><link href="#2_Countingsemaphores" title="Counting semaphores" rel="Section"/>
<link href="#2_Binarysemaphores" title="Binary semaphores" rel="Section"/>
<title>Semaphore</title>
<script src="search.js"></script><script src="scroll.js"></script><script src="navigation.js"></script><link href="favicon.ico" rel="shortcut icon" type="image/x-icon"/></head>
<body><div class="api"><div id="sidebar-button"><span>â˜°</span></div><header id="sidebar"><nav class="toc brand"><a href="../manual/index.html" class="brand"><img src="colour-logo.svg" class="svg" alt="OCaml"/></a></nav><nav class="toc"><div class="toc_version"><a href="https://ocaml.org/releases/" id="version-select">API Version 4.12</a></div><a href="index.html">&lt; General Index</a><div class="api_search"><input type="text" name="apisearch" id="api_search" class="api_search" oninput="mySearch(false);" onkeypress="this.oninput();" onclick="this.oninput();" onpaste="this.oninput();"/>
<img src="search_icon.svg" alt="Search" class="api_search svg" onclick="mySearch(false)"/></div>
<div id="search_results"></div><div class="toc_title"><a href="#top">Semaphore</a></div><ul><li><ul><li><a href="#2_Countingsemaphores">Counting semaphores</a></li><li><a href="#2_Binarysemaphores">Binary semaphores</a></li></ul></li></ul></nav></header>

<h1>Module <a href="type_Semaphore.html">Semaphore</a></h1>

<pre><span id="MODULESemaphore"><span class="keyword">module</span> Semaphore</span>: <code class="code"><span class="keyword">sig</span></code> <a href="Semaphore.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
<div class="info-desc">
<p>Semaphores</p>

<p>A semaphore is a thread synchronization device that can be used to
  control access to a shared resource.</p>

<p>Two flavors of semaphores are provided: counting semaphores and
  binary semaphores.</p>
</div>
<ul class="info-attributes">
<li><b>Since</b> 4.12</li>
</ul>
</div>
<hr width="100%"/>
<h3 id="2_Countingsemaphores">Counting semaphores</h3><p>A counting semaphore is a counter that can be accessed concurrently
  by several threads.  The typical use is to synchronize producers and
  consumers of a resource by counting how many units of the resource
  are available.</p>

<p>The two basic operations on semaphores are:</p>
<ul>
<li>"release" (also called "V", "post", "up", and "signal"), which
  increments the value of the counter.  This corresponds to producing
  one more unit of the shared resource and making it available to others.</li>
<li>"acquire" (also called "P", "wait", "down", and "pend"), which
  waits until the counter is greater than zero and decrements it.
  This corresponds to consuming one unit of the shared resource.</li>
</ul>

<pre><span id="MODULECounting"><span class="keyword">module</span> <a href="Semaphore.Counting.html">Counting</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Semaphore.Counting.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><h3 id="2_Binarysemaphores">Binary semaphores</h3><p>Binary semaphores are a variant of counting semaphores
    where semaphores can only take two values, 0 and 1.</p>

<p>A binary semaphore can be used to control access to a single
    shared resource, with value 1 meaning "resource is available" and
    value 0 meaning "resource is unavailable".</p>

<p>The "release" operation of a binary semaphore sets its value to 1,
    and "acquire" waits until the value is 1 and sets it to 0.</p>

<p>A binary semaphore can be used instead of a mutex (see module
    <a href="Mutex.html"><code class="code"><span class="constructor">Mutex</span></code></a>) when the mutex discipline (of unlocking the mutex from the
    thread that locked it) is too restrictive.  The "acquire" operation
    corresponds to locking the mutex, and the "release" operation to
    unlocking it, but "release" can be performed in a thread different
    than the one that performed the "acquire".  Likewise, it is safe
    to release a binary semaphore that is already available.</p>

<pre><span id="MODULEBinary"><span class="keyword">module</span> <a href="Semaphore.Binary.html">Binary</a></span>: <code class="code"><span class="keyword">sig</span></code> <a href="Semaphore.Binary.html">..</a> <code class="code"><span class="keyword">end</span></code></pre>
</div></body></html>