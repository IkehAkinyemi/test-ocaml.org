<!DOCTYPE HTML>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta charset="utf-8"/>
    
    <link href="4.12.0.html" rel="alternate" hreflang="en"/>

    
    <title>OCaml 4.12.0 &#8211; OCaml</title>
    <link href="../img/favicon32x32.ico?" rel="shortcut icon" type="image/x-icon"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <link href="//fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"/>
    <link href="//fonts.googleapis.com/css?family=Domine:400,700" rel="stylesheet"/>
    <link href="//fonts.googleapis.com/css?family=Droid+Sans+Mono" rel="stylesheet" type="text/css"/>
    
    <link href="../css/bootstrap.css" rel="stylesheet" media="screen"/>
    <link href="../css/bootstrap_mod.css" rel="stylesheet" media="screen"/>
    <link href="../css/ocamlorg.css" rel="stylesheet" media="screen"/>
    <script src="../js/collapsed-menu.js"></script>
    
    
    <script>
      if (document.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#Image', '1.1')) {
      document.documentElement.className = 'svg';
      }
    </script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <button aria-label="menu" type="button" class="btn btn-navbar" onclick="toggleVisibilityMenu('menu-items')">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="../" class="brand"><img src="../img/colour-logo-white.svg" class="svg" alt="OCaml"/><img src="../img/colour-logo-white.png" class="png" alt="OCaml"/></a>
          <div id="menu-items" class="nav-collapse collapse">
                        <ul class="nav">
              <li><a href="../learn/" title="Beginner's guide to OCaml">Learn</a></li>
              <li><a href="../docs/" title="Official Documentation for OCaml">Documentation</a></li>
              <li><a href="https://opam.ocaml.org/" title="Documentation for OCaml Packages">Packages</a></li>
              <li><a href="../community/" title="To Contribute to OCaml">Community</a></li>
              <li><a href="../community/planet/" title="Blogs and News">News</a></li>
            </ul>

            
            <a href="https://github.com/ocaml/ocaml.org/tree/master/site/releases/4.12.0.md" title="Edit this page" class="edit-this-page pull-right"><span>Edit this page</span></a>
	    <script>
	      // Preload the hover image
	      Image1= new Image(33,33);
	      Image1.src = '/img/edit-hover.svg';
	      Image2= new Image(33,33);
	      Image2.src = '/img/edit-hover.png';
	    </script>
            
            <form id="searchform" class="navbar-search pull-right" method="get" action="//www.google.com/search">
              <input type="hidden" name="as_sitesearch" value="ocaml.org"/>
              <label for="search" class="visually-hidden">Search: </label>
              <input id="search" placeholder="Search" class="search-query" name="q" type="text"/>
            </form>
          </div>
        </div>
      </div>
      
    </nav>
    
    
<div class="container">
  <div class="row">
    
    
    
    
    <div id="content-primary" class="span12">
            <div id="tryocaml" class="content" style="display:none;">
        <div class="container">
          <div class="row">
            <div id="lesson-message"></div>
            <div id="languages" style="display:none;"></div>
            <div id="menu-lessons" style="display:none">
              <table class="zebra-striped">
                <tr><td id="text-x"><code></code></td> <td></td></tr>
              </table>
            </div>
            <div class="span9 ocaml">
              <div id="toplevel-container">
                <pre id="output"></pre>
                <div id="sharp">#</div>
                <div id="toplevel"></div>
              </div>
              <div id="buttons"></div>
              <div id="graphics-title"></div>
              <div id="graphics"></div>
            </div>
          </div>
        </div>
      </div>

      
<div class="running-header">
  
  <div class="row">
    <ol class="breadcrumb">
      <li><a href="../">Home</a><span class="divider"></span></li>
<li><a href="../releases/">Releases</a><span class="divider"></span></li>
<li class="active">OCaml 4.12.0</li>


    </ol>
    <ul class="translations">
      <li class="active">en</li>

    </ul>
  </div>
  
</div>

      <div id="main-contents" class="content">
        

<h1 id="OCaml-4-12-0">OCaml 4.12.0</h1><p>This page describes OCaml version <strong>4.12.0</strong>, released on
2021-02-24.  Go <a href="./">here</a> for a list of all releases.</p>
<p>This release is available as an
<a href="https://opam.ocaml.org/doc/Usage.html">OPAM</a> switch.</p>
<h2 id="What-39-s-new">What&#39;s new</h2><p>Some of the highlights in OCaml 4.12.0 are:</p>
<ul><li>Major progress in reducing the difference between the mainline and
 multicore runtime</li><li>A new configuration option <code>ocaml-option-nnpchecker</code> which emits an alarm
 when the garbage collector finds out-of-heap pointers that could cause a crash
 in the multicore runtime</li><li>Support for macOS/arm64</li><li>Mnemonic names for warnings</li><li>Many quality of life improvements</li><li>Many bug fixes</li></ul>

<p>For a comprehensive list of changes and details on all new features,
bug fixes, optimizations, etc., please consult the
<a href="#Changes">changelog</a>.</p>
<h2 id="Configuration-options">Configuration options</h2>

<p>The configuration of the installed opam switch can be tuned with the
following options:</p>
<ul><li>ocaml-option-32bit: set OCaml to be compiled in 32-bit mode for 64-bit Linux and OS X hosts</li><li>ocaml-option-afl: set OCaml to be compiled with afl-fuzz instrumentation</li><li>ocaml-option-bytecode-only: compile OCaml without the native-code compiler</li><li>ocaml-option-default-unsafe-string: set OCaml to be compiled without safe strings by default</li><li>ocaml-option-flambda: set OCaml to be compiled with flambda activated</li><li>ocaml-option-fp: set OCaml to be compiled with frame-pointers enabled</li><li>ocaml-option-musl: set OCaml to be compiled with musl-gcc</li><li>ocaml-option-nnp : set OCaml to be compiled with --disable-naked-pointers</li><li>ocaml-option-nnpchecker: set OCaml to be compiled with --enable-naked-pointers-checker</li><li>ocaml-option-no-flat-float-array: set OCaml to be compiled with --disable-flat-float-array</li><li>ocaml-option-static :set OCaml to be compiled with musl-gcc -static</li></ul>

<p>For instance, one can install a switch with both <code>flambda</code> and the naked-pointer checker enabled with</p>
<pre><code>opam switch create 4.12.0+flambda+nnpchecker --package=ocaml-variants.4.12.0+options,ocaml-option-flambda,ocaml-option-nnpchecker</code></pre>

<h2 id="Source-distribution"><img src="../img/source.gif" alt=""/> Source distribution</h2>

<ul><li><a href="https://github.com/ocaml/ocaml/archive/4.12.0.tar.gz">Source
 tarball</a>
 (.tar.gz) for compilation under Unix (including Linux and MacOS X)
 and Microsoft Windows (including Cygwin).</li><li>Also available in
 <a href="https://github.com/ocaml/ocaml/archive/4.12.0.zip">.zip</a>
 format.</li><li><a href="https://opam.ocaml.org/">OPAM</a> is a source-based distribution of
 OCaml and many companion libraries and tools. Compilation and
 installation are automated by powerful package managers.</li><li>The official development repo is hosted on
 <a href="https://github.com/ocaml/ocaml">GitHub</a>.</li></ul>

<p>The
<a href="4.12/notes/INSTALL.adoc">INSTALL</a> file
of the distribution provides detailed compilation and installation
instructions — see also the <a href="4.12/notes/README.win32.adoc">Windows release
notes</a> for
instructions on how to build under Windows.</p>
<h2 id="Alternative-Compilers">Alternative Compilers</h2>

<p>Additionally, the following projects allow you to compile OCaml code to
targets traditionally associated with other languages:</p>
<ul><li><a href="http://ocsigen.org/js_of_ocaml/">Js_of_ocaml</a> is a stable OCaml
 to JavaScript compiler.</li></ul>

<h2 id="User-39-s-manual"><img src="../img/doc.gif" alt=""/> User&#39;s manual</h2>

<p>The user&#39;s manual for OCaml can be:</p>
<ul><li><a href="4.12/htmlman/index.html">browsed
 online</a>,</li><li>downloaded as a single
 <a href="4.12/ocaml-4.12-refman.pdf">PDF</a>,
 or <a href="4.12/ocaml-4.12-refman.txt">plain
 text</a>
 document,</li><li>downloaded as a single
 <a href="4.12/ocaml-4.12-refman-html.tar.gz">TAR</a>
 or
 <a href="4.11/ocaml-4.12-refman-html.zip">ZIP</a>
 archive of HTML files,</li><li>downloaded as a single
 <a href="4.12/ocaml-4.12-refman.info.tar.gz">tarball</a>
 of Emacs info files,</li></ul>

<h2 id="Changes">Changes</h2>

<p>This is the
<a href="4.12/notes/Changes">changelog</a>.
(Changes that can break existing programs are marked with a  &quot;breaking change&quot; warning)</p>
<h3 id="Supported-platforms-highlights">Supported platforms (highlights):</h3>

<ul><li><a href="https://github.com/ocaml/ocaml/issues/9699">9699</a>: add support for iOS and macOS on ARM 64 bits
 (Eduardo Rafael, review by Xavier Leroy, Nicolás Ojeda Bär
 and Anil Madhavapeddy, additional testing by Michael Schmidt)</li></ul>

<h3 id="Standard-library-highlights">Standard library (highlights):</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9797">9797</a>: Add Sys.mkdir and Sys.rmdir.
 (David Allsopp, review by Nicolás Ojeda Bär, Sébastien Hinderer and
 Xavier Leroy)</p>
</li><li><p>[*breaking change*] [9765](https://github.com/ocaml/ocaml/issues/9765): add init functions to Bigarray.
 (Jeremy Yallop, review by Gabriel Scherer, Nicolás Ojeda Bär, and
 Xavier Leroy)</p>
</li><li><p>[*breaking change*] [9668](https://github.com/ocaml/ocaml/issues/9668): List.equal, List.compare
 (This could break code using &quot;open List&quot; by shadowing
 Stdlib.{equal,compare}.)
 (Gabriel Scherer, review by Nicolás Ojeda Bär, Daniel Bünzli and Alain Frisch)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9066">9066</a>: a new Either module with
 type &#39;a Either.t = Left of &#39;a | Right of &#39;b
 (Gabriel Scherer, review by Daniel Bünzli, Thomas Refis, Jeremy Yallop)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9066">9066</a>: List.partition_map :
 (&#39;a -&gt; (&#39;b, &#39;c) Either.t) -&gt; &#39;a list -&gt; &#39;b list * &#39;c list
 (Gabriel Scherer, review by Jeremy Yallop)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9865">9865</a>: add Format.pp_print_seq
 (Raphaël Proust, review by Nicolás Ojeda Bär)</p>
</li></ul>

<h3 id="Compiler-user-interface-and-warnings-highlights">Compiler user-interface and warnings (highlights):</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9657">9657</a>: Warnings can now be referred to by their mnemonic name. The names are
 displayed using <code>-warn-help</code> and can be utilized anywhere where a warning list
 specification is expected.
 ocamlc -w +fragile-match
 ...[@@ocaml.warning &quot;-fragile-match&quot;]
 Note that only a single warning name at a time is supported for now:
 &quot;-w +foo-bar&quot; does not work, you must use &quot;-w +foo -w -bar&quot;.
 (Nicolás Ojeda Bär, review by Gabriel Scherer, Florian Angeletti and
 Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8939">8939</a>: Command-line option to save Linear IR before emit.
 (Greta Yorsh, review by Mark Shinwell, Sébastien Hinderer and Frédéric Bour)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9003">9003</a>: Start compilation from Emit when the input file is in Linear IR format.
 (Greta Yorsh, review by Jérémie Dimino, Gabriel Scherer and Frédéric Bour)</p>
</li></ul>

<h3 id="Language-features-highlights">Language features (highlights):</h3>

<ul><li>[*breaking change*] [9500](https://github.com/ocaml/ocaml/issues/9500), <a href="https://github.com/ocaml/ocaml/issues/9727">9727</a>, <a href="https://github.com/ocaml/ocaml/issues/9866">9866</a>, <a href="https://github.com/ocaml/ocaml/issues/9870">9870</a>, <a href="https://github.com/ocaml/ocaml/issues/9873">9873</a>: Injectivity annotations
 One can now mark type parameters as injective, which is useful for
 abstract types:
 module Vec : sig type !&#39;a t end = struct type &#39;a t = &#39;a array end
 On non-abstract types, this can be used to check the injectivity of
 parameters. Since all parameters of record and sum types are by definition
 injective, this only makes sense for type abbreviations:
 type !&#39;a t = &#39;a list
 Note that this change required making the regularity check stricter.
 (Jacques Garrigue, review by Jeremy Yallop and Leo White)</li></ul>

<h3 id="Runtime-system-highlights">Runtime system (highlights):</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9534">9534</a>, <a href="https://github.com/ocaml/ocaml/issues/9947">9947</a>: Introduce a naked pointers checker mode to the runtime
 (configure option --enable-naked-pointers-checker).  Alarms are printed
 when the garbage collector finds out-of-heap pointers that could
 cause a crash in no-naked-pointers mode.
 (Enguerrand Decorne, KC Sivaramakrishnan, Xavier Leroy, Stephen Dolan,
 David Allsopp, Nicolás Ojeda Bär review by Xavier Leroy, Nicolás Ojeda Bär)</p>
</li><li><p>[*breaking change*] [1128](https://github.com/ocaml/ocaml/issues/1128), <a href="https://github.com/ocaml/ocaml/issues/7503">7503</a>, <a href="https://github.com/ocaml/ocaml/issues/9036">9036</a>, <a href="https://github.com/ocaml/ocaml/issues/9722">9722</a>, <a href="https://github.com/ocaml/ocaml/issues/10069">10069</a>: EINTR-based signal handling.
 When a signal arrives, avoid running its OCaml handler in the middle
 of a blocking section. Instead, allow control to return quickly to
 a polling point where the signal handler can safely run, ensuring that
 I/O locks are not held while it runs. A polling point was removed from
 caml_leave_blocking_section, and one added to caml_raise.
 (Stephen Dolan, review by Goswin von Brederlow, Xavier Leroy, Damien
 Doligez, Anil Madhavapeddy, Guillaume Munch-Maccagnoni and Jacques-
 Henri Jourdan)</p>
</li><li><p>[*breaking change*] [5154](https://github.com/ocaml/ocaml/issues/5154), <a href="https://github.com/ocaml/ocaml/issues/9569">9569</a>, <a href="https://github.com/ocaml/ocaml/issues/9734">9734</a>: Add <code>Val_none</code>, <code>Some_val</code>, <code>Is_none</code>, <code>Is_some</code>,
 <code>caml_alloc_some</code>, and <code>Tag_some</code>. As these macros are sometimes defined by
 authors of C bindings, this change may cause warnings/errors in case of
 redefinition.
 (Nicolás Ojeda Bär, review by Stephen Dolan, Gabriel Scherer, Mark Shinwell,
 and Xavier Leroy)</p>
</li><li><p>[*breaking change*] [9674](https://github.com/ocaml/ocaml/issues/9674): Memprof: guarantee that an allocation callback is always run
 in the same thread the allocation takes place
 (Jacques-Henri Jourdan, review by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10025">10025</a>: Track custom blocks (e.g. Bigarray) with Memprof
 (Stephen Dolan, review by Leo White, Gabriel Scherer and Jacques-Henri
 Jourdan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9619">9619</a>: Change representation of function closures so that code pointers
 can be easily distinguished from environment variables
 (Xavier Leroy, review by Mark Shinwell and Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9654">9654</a>: More efficient management of code fragments.
 (Xavier Leroy, review by Jacques-Henri Jourdan, Damien Doligez, and
 Stephen Dolan)</p>
</li></ul>

<h3 id="Other-libraries-highlights">Other libraries (highlights):</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9573">9573</a>: reimplement Unix.create_process and related functions without
 Unix.fork, for better efficiency and compatibility with threads.
 (Xavier Leroy, review by Gabriel Scherer and Anil Madhavapeddy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9575">9575</a>: Add Unix.is_inet6_addr
 (Nicolás Ojeda Bär, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9930">9930</a>: new module Semaphore in the thread library, implementing
 counting semaphores and binary semaphores
 (Xavier Leroy, review by Daniel Bünzli and Damien Doligez,
 additional suggestions by Stephen Dolan and Craig Ferguson)</p>
</li><li><p>[*breaking change*] [9206](https://github.com/ocaml/ocaml/issues/9206), <a href="https://github.com/ocaml/ocaml/issues/9419">9419</a>: update documentation of the threads library;
 deprecate Thread.kill, Thread.wait_read, Thread.wait_write,
 and the whole ThreadUnix module.
 (Xavier Leroy, review by Florian Angeletti, Guillaume Munch-Maccagnoni,
 and Gabriel Scherer)</p>
</li></ul>

<h3 id="Manual-and-documentation-highlights">Manual and documentation (highlights):</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9755">9755</a>: Manual: post-processing the html generated by ocamldoc and
 hevea. Improvements on design and navigation, including a mobile
 version, and a quick-search functionality for the API.
 (San Vũ Ngọc, review by David Allsopp and Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9468">9468</a>: HACKING.adoc: using dune to get merlin support
 (Thomas Refis, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9684">9684</a>: document in address_class.h the runtime value model in
 naked-pointers and no-naked-pointers mode
 (Xavier Leroy and Gabriel Scherer)</p>
</li></ul>

<h3 id="Internal-compiler-libs-changes-highlights">Internal/compiler-libs changes (highlights):</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9464">9464</a>, <a href="https://github.com/ocaml/ocaml/issues/9493">9493</a>, <a href="https://github.com/ocaml/ocaml/issues/9520">9520</a>, <a href="https://github.com/ocaml/ocaml/issues/9563">9563</a>, <a href="https://github.com/ocaml/ocaml/issues/9599">9599</a>, <a href="https://github.com/ocaml/ocaml/issues/9608">9608</a>, <a href="https://github.com/ocaml/ocaml/issues/9647">9647</a>: refactor
 the pattern-matching compiler
 (Thomas Refis and Gabriel Scherer, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9696">9696</a>: ocamltest now shows its log when a test fails. In addition, the log
 contains the output of executed programs.
 (Nicolás Ojeda Bär, review by David Allsopp, Sébastien Hinderer and Gabriel
 Scherer)</p>
</li></ul>

<h3 id="Build-system-highlights">Build system (highlights):</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9824">9824</a>, <a href="https://github.com/ocaml/ocaml/issues/9837">9837</a>: Honour the CFLAGS and CPPFLAGS variables.
 (Sébastien Hinderer, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10063">10063</a>: (Re-)enable building on illumos (SmartOS, OmniOS, ...) and
 Oracle Solaris; x86_64/GCC and 64-bit SPARC/Sun PRO C compilers.
 (partially revert <a href="https://github.com/ocaml/ocaml/issues/2024">2024</a>).
 (Tõivo Leedjärv and Konstantin Romanov,
 review by Gabriel Scherer, Sébastien Hinderer and Xavier Leroy)</p>
</li></ul>

<h3 id="Language-features">Language features:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/1655">1655</a>: pattern aliases do not ignore type constraints
 (Thomas Refis, review by Jacques Garrigue and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9429">9429</a>: Add unary operators containing <code>#</code> to the parser for use in ppx
 rewriters
 (Leo White, review by Damien Doligez)</p>
</li></ul>

<h3 id="Runtime-system">Runtime system:</h3>

<ul><li><p>[*breaking change*] [9697](https://github.com/ocaml/ocaml/issues/9697): Remove the Is_in_code_area macro and the registration of DLL code
 areas in the page table, subsumed by the new code fragment management API
 (Xavier Leroy, review by Jacques-Henri Jourdan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9756">9756</a>: garbage collector colors change
 removes the gray color from the major gc
 (Sadiq Jaffer and Stephen Dolan reviewed by Xavier Leroy,
 KC Sivaramakrishnan, Damien Doligez and Jacques-Henri Jourdan)</p>
</li><li><p>[*breaking change*] [9513](https://github.com/ocaml/ocaml/issues/9513): Selectively initialise blocks in <code>Obj.new_block</code>. Reject <code>Custom_tag</code>
 objects and zero-length <code>String_tag</code> objects.
 (KC Sivaramakrishnan, review by David Allsopp, Xavier Leroy, Mark Shinwell
 and Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9564">9564</a>: Add a macro to construct out-of-heap block header.
 (KC Sivaramakrishnan, review by Stephen Dolan, Gabriel Scherer,
 and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9951">9951</a>: Ensure that the mark stack push optimisation handles naked pointers
 (KC Sivaramakrishnan, reported by Enguerrand Decorne, review by Gabriel
 Scherer, and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9678">9678</a>: Reimplement <code>Obj.reachable_words</code> using a hash table to
 detect sharing, instead of temporary in-place modifications.  This
 is a prerequisite for Multicore OCaml.
 (Xavier Leroy, review by Jacques-Henri Jourdan and Sébastien Hinderer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/1795">1795</a>, <a href="https://github.com/ocaml/ocaml/issues/9543">9543</a>: modernize signal handling on Linux i386, PowerPC, and s390x,
 adding support for Musl ppc64le along the way.
 (Xavier Leroy and Anil Madhavapeddy, review by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9648">9648</a>, <a href="https://github.com/ocaml/ocaml/issues/9689">9689</a>: Update the generic hash function to take advantage
 of the new representation for function closures
 (Xavier Leroy, review by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9649">9649</a>: Update the marshaler (output_value) to take advantage
 of the new representation for function closures
 (Xavier Leroy, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10050">10050</a>: update {PUSH,}OFFSETCLOSURE* bytecode instructions to match new
 representation for closures
 (Nathanaël Courant, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9728">9728</a>: Take advantage of the new closure representation to simplify the
 compaction algorithm and remove its dependence on the page table
 (Damien Doligez, review by Jacques-Henri Jourdan and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/2195">2195</a>: Improve error message in bytecode stack trace printing and load
 debug information during bytecode startup if OCAMLRUNPARAM=b=2.
 (David Allsopp, review by Gabriel Scherer and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9466">9466</a>: Memprof: optimize random samples generation.
 (Jacques-Henri Jourdan, review by Xavier Leroy and Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9628">9628</a>: Memprof: disable sampling when memprof is suspended.
 (Jacques-Henri Jourdan, review by Gabriel Scherer and Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10056">10056</a>: Memprof: ensure young_trigger is within the bounds of the minor
 heap in caml_memprof_renew_minor_sample (regression from <a href="https://github.com/ocaml/ocaml/issues/8684">8684</a>)
 (David Allsopp, review by Guillaume Munch-Maccagnoni and
 Jacques-Henri Jourdan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9508">9508</a>: Remove support for FreeBSD prior to 4.0R, that required explicit
 floating-point initialization to behave like IEEE standard
 (Hannes Mehnert, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8807">8807</a>, <a href="https://github.com/ocaml/ocaml/issues/9503">9503</a>: Use different symbols for do_local_roots on bytecode and native
 (Stephen Dolan, review by David Allsopp and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9670">9670</a>: Report full major collections in Gc stats.
 (Leo White, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9675">9675</a>: Remove the caml<em>static</em>{alloc,free,resize} primitives, now unused.
 (Xavier Leroy, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9710">9710</a>: Drop &quot;support&quot; for an hypothetical JIT for OCaml bytecode
 which has never existed.
 (Jacques-Henri Jourdan, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9742">9742</a>, <a href="https://github.com/ocaml/ocaml/issues/9989">9989</a>: Ephemerons are now compatible with infix pointers occurring
 when using mutually recursive functions.
 (Jacques-Henri Jourdan, review by François Bobot)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9888">9888</a>, <a href="https://github.com/ocaml/ocaml/issues/9890">9890</a>: Fixes a bug in the <code>riscv</code> backend where register t0 was not
 saved/restored when performing a GC. This could potentially lead to a
 segfault.
 (Nicolás Ojeda Bär, report by Xavier Leroy, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9907">9907</a>: Fix native toplevel on native Windows.
 (David Allsopp, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9909">9909</a>: Remove caml_code_area_start and caml_code_area_end globals (no longer
 needed as the pagetable heads towards retirement).
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9949">9949</a>: Clarify documentation of GC message 0x1 and make sure it is
 displayed every time a major cycle is forcibly finished.
 (Damien Doligez, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10062">10062</a>: set ARCH_INT64_PRINTF_FORMAT correctly for both modes of mingw-w64
 (David Allsopp, review by Xavier Leroy)</p>
</li></ul>

<h3 id="Code-generation-and-optimizations">Code generation and optimizations:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9551">9551</a>: ocamlc no longer loads DLLs at link time to check that
 external functions referenced from OCaml code are defined.
 Instead, .so/.dll files are parsed directly by pure OCaml code.
 (Nicolás Ojeda Bär, review by Daniel Bünzli, Gabriel Scherer,
 Anil Madhavapeddy, and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9620">9620</a>: Limit the number of parameters for an uncurried or untupled
 function.  Functions with more parameters than that are left
 partially curried or tupled.
 (Xavier Leroy, review by Mark Shinwell)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9752">9752</a>: Revised handling of calling conventions for external C functions.
 Provide a more precise description of the types of unboxed arguments,
 so that the ARM64 iOS/macOS calling conventions can be honored.
 (Xavier Leroy, review by Mark Shinwell and Eduardo Rafael)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9838">9838</a>: Ensure that Cmm immediates are generated as Cconst_int where
 possible, improving instruction selection.
 (Stephen Dolan, review by Leo White and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9864">9864</a>: Revised recognition of immediate arguments to integer operations.
 Fixes several issues that could have led to producing assembly code
 that is rejected by the assembler.
 (Xavier Leroy, review by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9969">9969</a>, <a href="https://github.com/ocaml/ocaml/issues/9981">9981</a>: Added mergeable flag to ELF sections containing mergeable
 constants.  Fixes compatibility with the integrated assembler in clang 11.0.0.
 (Jacob Young, review by Nicolás Ojeda Bär)</p>
</li></ul>

<h3 id="Standard-library">Standard library:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9781">9781</a>: add injectivity annotations to parameterized abstract types
 (Jeremy Yallop, review by Nicolás Ojeda Bär)</p>
</li><li><p>[*breaking change*] [9554](https://github.com/ocaml/ocaml/issues/9554): add primitive <strong>FUNCTION</strong> that returns the name of the current method
 or function, including any enclosing module or class.
 (Nicolás Ojeda Bär, Stephen Dolan, review by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9075">9075</a>: define to_rev_seq in Set and Map modules.
 (Sébastien Briais, review by Gabriel Scherer and Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9561">9561</a>: Unbox Unix.gettimeofday and Unix.time
 (Stephen Dolan, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9570">9570</a>: Provide an Atomic module with a trivial purely-sequential
 implementation, to help write code that is compatible with Multicore
 OCaml.
 (Gabriel Scherer, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10035">10035</a>: Make sure that flambda respects atomicity in the Atomic module.
 (Guillaume Munch-Maccagnoni, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9571">9571</a>: Make at_exit and Printexc.register_printer thread-safe.
 (Guillaume Munch-Maccagnoni, review by Gabriel Scherer and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9587">9587</a>: Arg: new Rest_all spec to get all rest arguments in a list
 (this is similar to Rest, but makes it possible to detect when there
 are no arguments (an empty list) after the rest marker)
 (Gabriel Scherer, review by Nicolás Ojeda Bär and David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9655">9655</a>: Obj: introduce type raw_data and functions raw_field, set_raw_field
 to manipulate out-of-heap pointers in no-naked-pointer mode,
 and more generally all other data that is not a well-formed OCaml value
 (Xavier Leroy, review by Damien Doligez and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9663">9663</a>: Extend Printexc API for raw backtrace entries.
 (Stephen Dolan, review by Nicolás Ojeda Bär and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9763">9763</a>: Add function Hashtbl.rebuild to convert from old hash table
 formats (that may have been saved to persistent storage) to the
 current hash table format.  Remove leftover support for the hash
 table format and generic hash function that were in use before OCaml 4.00.
 (Xavier Leroy, review by Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10070">10070</a>: Fix Float.Array.blit when source and destination arrays coincide.
 (Nicolás Ojeda Bär, review by Alain Frisch and Xavier Leroy)</p>
</li></ul>

<h3 id="Other-libraries">Other libraries:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8796">8796</a>: On Windows, make Unix.utimes use FILE_FLAG_BACKUP_SEMANTICS flag
 to allow it to work with directories.
 (Daniil Baturin, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9593">9593</a>: Use new flag for non-elevated symbolic links and test for Developer
 Mode on Windows
 (Manuel Hornung, review by David Allsopp and Nicolás Ojeda Bär)</p>
</li><li><p>[*breaking change*] [9601](https://github.com/ocaml/ocaml/issues/9601): Return EPERM for EUNKNOWN -1314 in win32unix (principally affects
 error handling when Unix.symlink is unavailable)
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9338">9338</a>, <a href="https://github.com/ocaml/ocaml/issues/9790">9790</a>: Dynlink: make sure *_units () functions report accurate
 information before the first load.
 (Daniel Bünzli, review by Xavier Leroy and Nicolás Ojeda Bär)</p>
</li><li><p>[*breaking change*] [9757](https://github.com/ocaml/ocaml/issues/9757), <a href="https://github.com/ocaml/ocaml/issues/9846">9846</a>, <a href="https://github.com/ocaml/ocaml/issues/10161">10161</a>: check proper ownership when operating over mutexes.
 Now, unlocking a mutex held by another thread or not locked at all
 reliably raises a Sys_error exception.  Before, it was undefined
 behavior, but the documentation did not say so.
 Likewise, locking a mutex already locked by the current thread
 reliably raises a Sys_error exception.  Before, it could
 deadlock or succeed (and do recursive locking), depending on the OS.
 (Xavier Leroy, report by Guillaume Munch-Maccagnoni, review by
 Guillaume Munch-Maccagnoni, David Allsopp, and Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9802">9802</a>: Ensure signals are handled before Unix.kill returns
 (Stephen Dolan, review by Jacques-Henri Jourdan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9869">9869</a>, <a href="https://github.com/ocaml/ocaml/issues/10073">10073</a>: Add Unix.SO_REUSEPORT
 (Yishuai Li, review by Xavier Leroy, amended by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9906">9906</a>, <a href="https://github.com/ocaml/ocaml/issues/9914">9914</a>: Add Unix._exit as a way to exit the process immediately,
 skipping any finalization action
 (Ivan Gotovchits and Xavier Leroy, review by Sébastien Hinderer and
 David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9958">9958</a>: Raise exception in case of error in Unix.setsid.
 (Nicolás Ojeda Bär, review by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9971">9971</a>, <a href="https://github.com/ocaml/ocaml/issues/9973">9973</a>: Make sure the process can terminate when the last thread
 calls Thread.exit.
 (Xavier Leroy, report by Jacques-Henri Jourdan, review by David Allsopp
 and Jacques-Henri Jourdan).</p>
</li></ul>

<h3 id="Tools">Tools:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9551">9551</a>: ocamlobjinfo is now able to display information on .cmxs shared
 libraries natively; it no longer requires libbfd to do so
 (Nicolás Ojeda Bär, review by Daniel Bünzli, Gabriel Scherer,
 Anil Madhavapeddy, and Xavier Leroy)</p>
</li><li><p>[*breaking change*] [9299](https://github.com/ocaml/ocaml/issues/9299), <a href="https://github.com/ocaml/ocaml/issues/9795">9795</a>: ocamldep: do not process files during cli parsing. Fixes
 various broken cli behaviours.
 (Daniel Bünzli, review by Nicolás Ojeda Bär)</p>
</li></ul>

<h3 id="Debugging-and-profiling">Debugging and profiling:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9606">9606</a>, <a href="https://github.com/ocaml/ocaml/issues/9635">9635</a>, <a href="https://github.com/ocaml/ocaml/issues/9637">9637</a>: fix 4.10 performance regression in the debugger
 (behaviors quadratic in the size of the debugged program)
 (Xavier Leroy, report by Jacques Garrigue and Virgile Prevosto,
 review by David Allsopp and Jacques-Henri Jourdan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9948">9948</a>: Remove Spacetime.
 (Nicolás Ojeda Bär, review by Stephen Dolan and Xavier Leroy)</p>
</li></ul>

<h3 id="Manual-and-documentation">Manual and documentation:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/10142">10142</a>, <a href="https://github.com/ocaml/ocaml/issues/10154">10154</a>: improved rendering and latex code for toplevel code examples.
 (Florian Angeletti, report by John Whitington, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9745">9745</a>: Manual: Standard Library labeled and unlabeled documentation unified
 (John Whitington, review by Nicolás Ojeda Bär, David Allsopp,
 Thomas Refis, and Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9877">9877</a>: manual, warn that multi-index indexing operators should be defined in
 conjunction of single-index ones.
 (Florian Angeletti, review by Hezekiah M. Carty, Gabriel Scherer,
 and Marcello Seri)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10233">10233</a>: Document <code>-save-ir-after scheduling</code> and update <code>-stop-after</code> options.
 (Greta Yorsh, review by Gabriel Scherer and Florian Angeletti)</p>
</li></ul>

<h3 id="Compiler-user-interface-and-warnings">Compiler user-interface and warnings:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/1931">1931</a>: rely on levels to enforce principality in patterns
 (Thomas Refis and Leo White, review by Jacques Garrigue)</p>
</li><li><p>[*breaking change*] [9011](https://github.com/ocaml/ocaml/issues/9011): Do not create .a/.lib files when creating a .cmxa with no modules.
 macOS ar doesn&#39;t support creating empty .a files (<a href="https://github.com/ocaml/ocaml/issues/1094">1094</a>) and MSVC doesn&#39;t
 permit .lib files to contain no objects. When linking with a .cmxa containing
 no modules, it is now not an error for there to be no .a/.lib file.
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9560">9560</a>: Report partial application warnings on type errors in applications.
 (Stephen Dolan, report and testcase by whitequark, review by Gabriel Scherer
 and Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9583">9583</a>: when bytecode linking fails due to an unavailable module, the module
 that requires it is now included in the error message.
 (Nicolás Ojeda Bär, review by Vincent Laviron)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9615">9615</a>: Attach package type attributes to core_type.
 When parsing constraints on a first class module, attributes found after the
 module type were parsed but ignored. Now they are attached to the
 corresponding core_type.
 (Etienne Millon, review by Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/6633">6633</a>, <a href="https://github.com/ocaml/ocaml/issues/9673">9673</a>: Add hint when a module is used instead of a module type or
 when a module type is used instead of a module or when a class type is used
 instead of a class.
 (Xavier Van de Woestyne, report by whitequark, review by Florian Angeletti
 and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9754">9754</a>: allow [@tailcall true] (equivalent to [@tailcall]) and
 [@tailcall false] (warns if on a tailcall)
 (Gabriel Scherer, review by Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9751">9751</a>: Add warning 68. Pattern-matching depending on mutable state
 prevents the remaining arguments from being uncurried.
 (Hugo Heuzard, review by Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9783">9783</a>: Widen warning 16 (Unerasable optional argument) to more cases.
 (Leo White, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10008">10008</a>: Improve error message for aliases to the current compilation unit.
 (Leo White, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10046">10046</a>: Link all DLLs with -static-libgcc on mingw32 to prevent dependency
 on libgcc_s_sjlj-1.dll with mingw-w64 runtime 8.0.0 (previously this was
 only needed for dllunix.dll).
 (David Allsopp, report by Andreas Hauptmann, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9634">9634</a>: Allow initial and repeated commas in <code>OCAMLRUNPARAM</code>.
 (Nicolás Ojeda Bär, review by Gabriel Scherer)</p>
</li></ul>

<h3 id="Internal-compiler-libs-changes">Internal/compiler-libs changes:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/8987">8987</a>: Make some locations more accurate
 (Thomas Refis, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9216">9216</a>: add Lambda.duplicate which refreshes bound identifiers
 (Gabriel Scherer, review by Pierre Chambart and Vincent Laviron)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9376">9376</a>: Remove spurious Ptop_defs from #use
 (Leo White, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9604">9604</a>: refactoring of the ocamltest codebase.
 (Nicolás Ojeda Bär, review by Gabriel Scherer and Sébastien Hinderer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9498">9498</a>, <a href="https://github.com/ocaml/ocaml/issues/9511">9511</a>: make the pattern-matching analyzer more robust to
 or-pattern explosion, by stopping after the first counter-example to
 exhaustivity
 (Gabriel Scherer, review by Luc Maranget, Thomas Refis and Florian Angeletti,
 report by Alex Fedoseev through Hongbo Zhang)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9514">9514</a>: optimize pattern-matching exhaustivity analysis in the single-row case
 (Gabriel Scherer, review by Stephen DOlan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9442">9442</a>: refactor the implementation of the [@tailcall] attribute
 to allow for a structured attribute payload
 (Gabriel Scherer, review by Vladimir Keleshev and Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9688">9688</a>: Expose the main entrypoint in compilerlibs
 (Stephen Dolan, review by Nicolás Ojeda Bär, Greta Yorsh and David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9715">9715</a>: recheck scope escapes after normalising paths
 (Matthew Ryan, review by Gabriel Scherer and Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9778">9778</a>: Fix printing for bindings where polymorphic type annotations and
 attributes are present.
 (Matthew Ryan, review by Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9797">9797</a>, <a href="https://github.com/ocaml/ocaml/issues/9849">9849</a>: Eliminate the routine use of external commands in ocamltest.
 ocamltest no longer calls the mkdir, rm and ln external commands (at present,
 the only external command ocamltest uses is diff).
 (David Allsopp, review by Nicolás Ojeda Bär, Sébastien Hinderer and
 Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9801">9801</a>: Don&#39;t ignore EOL-at-EOF differences in ocamltest.
 (David Allsopp, review by Damien Doligez, much input and thought from
 Daniel Bünzli, Damien Doligez, Sébastien Hinderer, and Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9889">9889</a>: more caching when printing types with -short-path.
 (Florian Angeletti, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9591">9591</a>: fix pprint of polyvariants that start with a core_type, closed,
 not low (Chet Murthy, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9590">9590</a>: fix pprint of extension constructors (and exceptions) that rebind
 (Chet Murthy, review by octachron@)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9963">9963</a>: Centralized tracking of frontend&#39;s global state
 (Frédéric Bour and Thomas Refis, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9631">9631</a>: Named text sections for caml_system__code_begin/end symbols
 (Greta Yorsh, review by Frédéric Bour)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9896">9896</a>: Share the strings representing scopes, fixing some regression
 on .cmo/.cma sizes
 (Alain Frisch and Xavier Clerc, review by Gabriel Scherer)</p>
</li></ul>

<h3 id="Build-system">Build system:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/9332">9332</a>, <a href="https://github.com/ocaml/ocaml/issues/9518">9518</a>, <a href="https://github.com/ocaml/ocaml/issues/9529">9529</a>: Cease storing C dependencies in the codebase. C
 dependencies are generated on-the-fly in development mode. For incremental
 compilation, the MSVC ports require GCC to be present.
 (David Allsopp, review by Sébastien Hinderer, YAML-fu by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/7121">7121</a>, <a href="https://github.com/ocaml/ocaml/issues/9558">9558</a>: Always have the autoconf-discovered ld in PACKLD, with
 extra flags in new variable PACKLD_FLAGS. For
 cross-compilation, this means the triplet-prefixed version will always be
 used.
 (David Allsopp, report by Adrian Nader, review by Sébastien Hinderer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9527">9527</a>: stop including configuration when running &#39;clean&#39; rules
 to avoid C dependency recomputation.
 (Gabriel Scherer, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9804">9804</a>: Build C stubs of libraries in otherlibs/ with debug info.
 (Stephen Dolan, review by Sébastien Hinderer and David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9938">9938</a>, <a href="https://github.com/ocaml/ocaml/issues/9939">9939</a>: Define __USE_MINGW_ANSI_STDIO=0 for the mingw-w64 ports to
 prevent their C99-compliant snprintf conflicting with ours.
 (David Allsopp, report by Michael Soegtrop, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9895">9895</a>, <a href="https://github.com/ocaml/ocaml/issues/9523">9523</a>: Avoid conflict with C++20 by not installing VERSION to the OCaml
 Standard Library directory.
 (Bernhard Schommer, review by David Allsopp)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10044">10044</a>: Always report the detected ARCH, MODEL and SYSTEM, even for bytecode-
 only builds (fixes a &quot;configuration regression&quot; from 4.08 for the Windows
 builds)
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10071">10071</a>: Fix bug in tests/misc/weaklifetime.ml that was reported in <a href="https://github.com/ocaml/ocaml/issues/10055">10055</a>
 (Damien Doligez and Gabriel Scherer, report by David Allsopp)</p>
</li></ul>

<h3 id="Bug-fixes">Bug fixes:</h3>

<ul><li><p><a href="https://github.com/ocaml/ocaml/issues/7538">7538</a>, <a href="https://github.com/ocaml/ocaml/issues/9669">9669</a>: Check for misplaced attributes on module aliases
 (Leo White, report by Thomas Leonard, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/7813">7813</a>, <a href="https://github.com/ocaml/ocaml/issues/9955">9955</a>: make sure the major GC cycle doesn&#39;t get stuck in Idle state
 (Damien Doligez, report by Anders Fugmann, review by Jacques-Henri Jourdan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/7902">7902</a>, <a href="https://github.com/ocaml/ocaml/issues/9556">9556</a>: Type-checker infers recursive type, even though -rectypes is
 off.
 (Jacques Garrigue, report by Francois Pottier, review by Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8746">8746</a>: Hashtbl: Restore ongoing traversal status after filter_map_inplace
 (Mehdi Bouaziz, review by Alain Frisch)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/8747">8747</a>, <a href="https://github.com/ocaml/ocaml/issues/9709">9709</a>: incorrect principality warning on functional updates of records
 (Jacques Garrigue, report and review by Thomas Refis)</p>
</li><li><p>[*breaking change*] [8907](https://github.com/ocaml/ocaml/issues/8907), <a href="https://github.com/ocaml/ocaml/issues/9878">9878</a>: <code>Typemod.normalize_signature</code> uses wrong environment
 (Jacques Garrigue, report and review by Leo White)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9421">9421</a>, <a href="https://github.com/ocaml/ocaml/issues/9427">9427</a>: fix printing of (::) in ocamldoc
 (Florian Angeletti, report by Yawar Amin, review by Damien Doligez)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9440">9440</a>: for a type extension constructor with parameterised arguments,
 REPL displayed &lt;poly&gt; for each as opposed to the concrete values used.
 (Christian Quinn, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9433">9433</a>: Fix package constraints for module aliases
 (Leo White, review by Jacques Garrigue)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9469">9469</a>: Better backtraces for lazy values
 (Leo White, review by Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9521">9521</a>, <a href="https://github.com/ocaml/ocaml/issues/9522">9522</a>: correctly fail when comparing functions
 with Closure and Infix tags.
 (Gabriel Scherer and Jeremy Yallop and Xavier Leroy,
 report by Twitter user @st_toHKR through Jun Furuse)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9611">9611</a>: maintain order of load path entries in various situations: when passing
 them to system linker, ppx contexts, etc.
 (Nicolás Ojeda Bär, review by Jérémie Dimino and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9633">9633</a>: ocamltest: fix a bug when certain variables set in test scripts would
 be ignored (eg <code>ocamlrunparam</code>).
 (Nicolás Ojeda Bär, review by Sébastien Hinderer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9681">9681</a>, <a href="https://github.com/ocaml/ocaml/issues/9690">9690</a>, <a href="https://github.com/ocaml/ocaml/issues/9693">9693</a>: small runtime changes
 for the new closure representation (<a href="https://github.com/ocaml/ocaml/issues/9619">9619</a>)
 (Xavier Leroy, Sadiq Jaffer, Gabriel Scherer,
 review by Xavier Leroy and Jacques-Henri Jourdan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9739">9739</a>, <a href="https://github.com/ocaml/ocaml/issues/9747">9747</a>: Avoid calling type variables, types that are not variables in
 recursive occurrence error messages
 (for instance, &quot;Type variable int occurs inside int list&quot;)
 (Florian Angeletti, report by Stephen Dolan, review by Armaël Guéneau)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9759">9759</a>, <a href="https://github.com/ocaml/ocaml/issues/9767">9767</a>: Spurious GADT ambiguity without -principal
 (Jacques Garrigue, report by Thomas Refis,
 review by Thomas Refis and Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9799">9799</a>, <a href="https://github.com/ocaml/ocaml/issues/9803">9803</a>: make pat_env point to the correct environment
 (Thomas Refis, report by Alex Fedoseev, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9825">9825</a>, <a href="https://github.com/ocaml/ocaml/issues/9830">9830</a>: the C global variable caml_fl_merge and the C function
 caml_spacetime_my_profinfo (bytecode version) were declared and
 defined with different types.  This is undefined behavior and
 cancause link-time errors with link-time optimization (LTO).
 (Xavier Leroy, report by Richard Jones, review by Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9753">9753</a>: fix build for Android
 (Eduardo Rafael, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9848">9848</a>, <a href="https://github.com/ocaml/ocaml/issues/9855">9855</a>: Fix double free of bytecode in toplevel
 (Stephen Dolan, report by Sampsa Kiiskinen, review by Gabriel Scherer)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9858">9858</a>, <a href="https://github.com/ocaml/ocaml/issues/9861">9861</a>: Compiler fails with Ctype.Nondep_cannot_erase exception
 (Thomas Refis, report by Philippe Veber, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9860">9860</a>: wrong range constraint for subtract immediate on zSystems / s390x
 (Xavier Leroy, review by Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9868">9868</a>, <a href="https://github.com/ocaml/ocaml/issues/9872">9872</a>, <a href="https://github.com/ocaml/ocaml/issues/9892">9892</a>: bugs in {in,out}_channel_length and seek_in
 for files opened in text mode under Windows
 (Xavier Leroy, report by Alain Frisch, review by Nicolás Ojeda Bär
 and Alain Frisch)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9925">9925</a>: Correct passing -fdebug-prefix-map to flexlink on Cygwin by prefixing
 it with -link.
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9927">9927</a>: Restore Cygwin64 support.
 (David Allsopp, review by Xavier Leroy)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9940">9940</a>: Fix unboxing of allocated constants from other compilation units
 (Vincent Laviron, report by Stephen Dolan, review by Xavier Leroy and
 Stephen Dolan)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9991">9991</a>: Fix reproducibility for <code>-no-alias-deps</code>
 (Leo White, review by Gabriel Scherer and Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9998">9998</a>: Use Sys.opaque_identity in CamlinternalLazy.force
 This removes extra warning 59 messages when compiling afl-instrumented
 code with flambda -O3.
 (Vincent Laviron, report by Louis Gesbert, review by Gabriel Scherer and
 Pierre Chambart)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9999">9999</a>: fix -dsource printing of the pattern (<code>A as x | (</code>B as x)).
 (Gabriel Scherer, report by Anton Bachin, review by Florian Angeletti)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/9970">9970</a>, <a href="https://github.com/ocaml/ocaml/issues/10010">10010</a>: fix the declaration scope of extensible-datatype constructors.
 A regression that dates back to 4.08 makes extensible-datatype constructors
 with inline records very fragile, for example:
 type &#39;a t += X of {x : &#39;a}
 (Gabriel Scherer, review by Thomas Refis and Leo White,
 report by Nicolás Ojeda Bär)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10048">10048</a>: Fix bug with generalized local opens.
 (Leo White, review by Thomas Refis)</p>
</li><li><p><a href="https://github.com/ocaml/ocaml/issues/10106">10106</a>, <a href="https://github.com/ocaml/ocaml/issues/10112">10112</a>: some expected-type explanations where forgotten
 after some let-bindings
 (Gabriel Scherer, review by Thomas Refis and Florian Angeletti,
 report by Daniil Baturin)</p>
</li></ul>

      </div>
    </div>
  </div>
</div>

    
    <footer id="footer" class="navbar navbar-inverse">
      <div class="navbar-inner">
	
<div class="column">
  <div class="entry">
    <h1><a href="../learn/" title="Beginner's guide to OCaml">Learn</a></h1>
    <ul>
      <li><a href="../learn/taste.html">Code Examples</a></li>
      <li><a href="../learn/tutorials/">Tutorials</a></li>
      <li><a href="../learn/books.html">Books</a></li>
      <li><a href="../learn/success.html">Success Stories</a></li>
    </ul>
  </div>
</div>
<div class="column">
  <div class="entry">
    <h1><a href="../docs/" title="Official Documentation for OCaml">Documentation</a></h1>
    <ul>
      <li><a href="../docs/install.html">Install</a></li>
      <li><a href="http://caml.inria.fr/pub/docs/manual-ocaml/">Manual</a></li>
      <li><a href="https://opam.ocaml.org/packages/">Packages</a></li>
      <li><a href="../releases/index.html">Compiler Releases</a></li>
      <li><a href="../docs/logos.html">Logos</a></li>
    </ul>
  </div>
</div>
<div class="column">
  <div class="entry">
    <h1><a href="../community/" title="To contribute to OCaml">Community</a></h1>
    <ul>
      <li><a href="../community/mailing_lists.html">Mailing Lists</a></li>
      <li><a href="../meetings/">Meetings</a></li>
      <li><a href="../community/planet/">News</a></li>
      <li><a href="../community/support.html">Support</a></li>
      <li><a href="http://caml.inria.fr/mantis/my_view_page.php" target="_blank" rel="noopener">Bug Tracker</a></li>
    </ul>
  </div>
</div>

<div class="column">
  <div class="entry">
    <h1><a href="../">Website</a></h1>
    <ul>
      <li><a href="https://github.com/ocaml/ocaml.org/tree/master/site/releases/4.12.0.md" target="_blank" rel="noopener">Edit this page</a></li>
      <li><a href="https://github.com/ocaml/ocaml.org/issues" target="_blank" rel="noopener">Website Issues</a></li>
      <li><a href="../about.html">About This Site</a></li>
    <li><a href="https://github.com/ocaml/ocaml.org/" target="_blank" rel="noopener">Find Us on GitHub</a></li>
      <li><a href="../contributors.html">Credits</a></li>
    </ul>
  </div>
</div>

      </div>
    </footer>
    
    
    <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

     

  </body>
</html>
